---
title: "Leaf Collection"
author: "Ed Rogers"
date: "December 22, 2015"
output: html_document
---


Load libraries and import the data
```{r importData, message=FALSE, warning=FALSE}
# library(tidyr)
library(dplyr)
library(reshape2)
leafData <- read.csv("mapStatuses.csv")
leafData <- leafData[,-which(names(leafData) == "District")]
leafData <- leafData %>% dcast(Time.Stamp ~ Area,value.var="Status")

# Remove consecutive duplicate entries (ignoring differences in timestamp)

#leafData <- leafData[!duplicated(leafData[-1]),] #This doesn't constrain itself to removing *consecutive* duplicates

leafData[is.na(leafData)] <- "NA"
leafData <- leafData[c(TRUE,rowMeans(tail(leafData[,-1],-1) != head(leafData[,-1],-1))>0),]
leafData[leafData=="NA"] <- NA

# Make the timestamp readable
leafData$Time.Stamp <- as.POSIXct(leafData$Time.Stamp,
                                  origin = "1970-01-01",
                                  tz="America/Chicago")

#This line creates a number of days til next "Current" is observed for each row
nDaysTilPickup <- apply(leafData, 2, function(x) which(x=="Current")[1]-1)

#Potential use: break data up:
#  3-lines previous is training data
#  nDaysTilPickup is vector of predicted values
#
#  Could train with 34 different training examples
# (one example for each 3 consecutive rows)

#Maybe a 666-input, 222-output neural network?
#Maybe 222 separate random forests?
```